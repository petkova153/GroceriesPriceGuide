
<div th:fragment="product-list">
    <div class="scrollable-box">
        <table>
            <tr>
                <th>Name</th>
                <th>Category</th>
                <th>Price</th>
                <th>Store</th>
            </tr>
            <tr th:each="product : ${products}">
                <td>
                    <img th:src="${product.pictureUrl}" alt="Image Description">
                </td>
                <td th:text="${product.productName}">Name</td>
                <td th:text="${product.productCategory}">Category</td>
                <td th:text="${product.productPrice}">Price</td>
                <td th:text="${product.store}">Store</td>
                <td>
                    <i class="bi bi-heart heart-icon" th:attr="data-product-id=${product.productID}" onclick="toggleFavorite(this)"></i>
                </td>
            </tr>
        </table>
    </div>
    <script>
        function toggleFavorite(heartIcon) {
            var productId = heartIcon.getAttribute("data-product-id");

            // Check if the product is already in favorites
            if (isProductInFavorites(productId)) {
                // Remove product from favorites
                removeFromFavorites(productId);
                heartIcon.classList.remove("filled-heart");
            } else {
                // Add product to favorites
                addToFavorites(productId);
                heartIcon.classList.add("filled-heart");
            }
        }


        function isProductInFavorites(productId) {
            const userFavorites = getUserFavoriteProducts();
            return userFavorites.includes(productId);
        }

        function addToFavorites(productId) {
            // Make an AJAX request to your Spring Boot backend to add the product to the user's favorites.
        }

        function removeFromFavorites(productId) {
            // Make an AJAX request to your Spring Boot backend to remove the product from the user's favorites.
        }
        function getUserFavoriteProducts() {
            // You can fetch the user's favorite products from the server or some client-side storage
            // For simplicity, let's assume it's an array of product IDs
            return [1, 3, 5]; // Example list of favorite product IDs
        }
    </script>
</div>